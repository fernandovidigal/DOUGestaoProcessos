<%- include('../includes/header.ejs') %>

  <div class="maincontent">
    <div class="maincontent__header maincontent__header--spaceBetweeen">
      <div class="maincontent__header--row">
        <a href="/admin" class="maincontent__backarrow"></a>
        <h1>Utilizadores</h1>
      </div>
      <% if(utilizadores.length> 0){ %>
        <div class="buttonsBar">
          <a href="/admin/adicionarUtilizador" class="btn btn__primary">Adicionar</a>
        </div>
      <% } %>
    </div>

    <% if(utilizadores.length> 0){ %>
      <table class="table">
        <tr>
          <th>Designação</th>
          <th>Email</th>
          <th>Nível</th>
          <th>Estado</th>
          <th></th>
        </tr>
        <% for(utilizador of utilizadores){ %>
          <tr>
            <td><%= utilizador.nome %></td>
            <td><%= utilizador.email %></td>
            <td><%= utilizador.nivel != 10 ? 'Utilizador' : 'Gestor' %></td>
            <td><a href="/admin/alterarEstadoUtilizador/<%= utilizador.utilizadorId %>" class="estadoBtn <%= utilizador.activo == 1 ? 'estadoBtn__activo' : 'estadoBtn__inactivo' %>"><%- utilizador.activo==1 ? 'Activo<span class="estadoBtnBall estadoBtnBall__activo"></span>' : '<span class="estadoBtnBall estadoBtnBall__inactivo"></span>Inactivo' %></a></td>
            <td align="right">
              <span class="table__actionButtons">
                <a href="/admin/alterarPassword/<%= utilizador.utilizadorId %>" class="table__actionButtons--button" title="Alterar Password">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" class="changePasswordIcon">
                    <path fill="none" d="M0 0h24v24H0z" />
                    <path
                      d="M18 8h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h2V7a6 6 0 1 1 12 0v1zM5 10v10h14V10H5zm6 4h2v2h-2v-2zm-4 0h2v2H7v-2zm8 0h2v2h-2v-2zm1-6V7a4 4 0 1 0-8 0v1h8z" />
                  </svg>
                </a>
                <a href="/admin/editarUtilizador/<%= utilizador.utilizadorId %>" class="table__actionButtons--button" title="Editar">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" class="editIcon">
                    <path fill="none" d="M0 0h24v24H0z" />
                    <path
                      d="M12.9 6.858l4.242 4.243L7.242 21H3v-4.243l9.9-9.9zm1.414-1.414l2.121-2.122a1 1 0 0 1 1.414 0l2.829 2.829a1 1 0 0 1 0 1.414l-2.122 2.121-4.242-4.242z" />
                  </svg>
                </a>
                <a class="table__actionButtons--button utilizador__deleteBtn"
                  data-nome="<%= utilizador.nome %>" data-utilizadorid="<%= utilizador.utilizadorId %>" title="Eliminar">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" class="deleteIcon">
                    <path fill="none" d="M0 0h24v24H0z" />
                    <path
                      d="M7 4V2h10v2h5v2h-2v15a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V6H2V4h5zM6 6v14h12V6H6zm3 3h2v8H9V9zm4 0h2v8h-2V9z" />
                  </svg>
                </a>
              </span>
            </td>
          </tr>
          <% } %>
      </table>
      <% } else { %>
        <div class="no-content__wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" class="no-content__icon">
            <path fill="none" d="M0 0h24v24H0z" />
            <path
              d="M4 22a8 8 0 1 1 16 0h-2a6 6 0 1 0-12 0H4zm8-9c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6zm0-2c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z" />
          </svg>
          <p class="no-content__text">Não existem utilizadores registados</p>
          <a href="/admin/adicionarUtilizador" class="btn btn__primary">Adicionar Utilizador</a>
        </div>
      <% } %>
  </div>

  <script src="/js/admin.js"></script>
  <%- include('../includes/footer.ejs') %>